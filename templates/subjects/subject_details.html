{% extends 'base.html' %} {% block content %}
<div class="d-flex flex-row justify-content-between align-items-center mb-3">
  <h1>{{ subject.title }}</h1>
  <a href="{% url 'subject_list' %}" class="btn btn-secondary">
    <i class="fa-solid fa-arrow-left"></i> Back
  </a>
</div>

<p><strong>Date</strong>: {{ subject.date }}</p>
<p><strong>Time</strong>: {{ subject.time }}</p>
<p><strong>Teacher</strong>: {{ subject.teacher.username }}</p>

{% if user.role == 'teacher' %}
<div class="d-flex flex-row justify-content-between mb-3">
  <div>
    <a
      href="{% url 'edit_subject' subject.id %}"
      class="btn btn-outline-warning"
    >
      <i class="fa-solid fa-edit"></i> Edit
    </a>
    <a
      href="{% url 'delete_subject' subject.id %}"
      class="btn btn-outline-danger"
      onclick="return confirm('Are you sure you want to delete this subject?')"
    >
      <i class="fa-solid fa-trash"></i> Delete
    </a>
    <a
      href="javascript:void(0);"
      onclick="showQRCode('{% url 'start_lesson' subject.id %}', '{{ subject.title }}')"
      class="btn btn-outline-secondary"
    >
      <i class="fa-solid fa-qrcode"></i> Generate QR
    </a>
  </div>
</div>

<h2>Enrolled Students</h2>
<table class="table table-bordered">
  <thead>
    <tr>
      <th>Name</th>
      <th>Attendance Status</th>
      <th>Attendance Time</th>
    </tr>
  </thead>
  <tbody>
    {% for student in students %}
    <tr>
      <td>{{ student.username }}</td>
      <td>
        <span
          class="badge {% if student.attended %} bg-success {% else %} bg-danger {% endif %}"
        >
          {% if student.attended %} Attended {% else %} Absent {% endif %}
        </span>
      </td>
      <td>
        {% if student.attended %} {{ student.attendance_time }} {% else %} N/A
        {% endif %}
      </td>
    </tr>
    {% empty %}
    <tr>
      <td colspan="3">No students enrolled yet.</td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endif %} {% endblock %}
